
{% extends "base.html" %}
{% block content %}
<div class="d-flex align-items-center mb-3">
  <input id="q" class="form-control me-2" placeholder="Search title or authorâ€¦" />
  <select id="tag" class="form-select" style="max-width:220px">
    <option value="">All tags</option>
    {% for t in all_tags %}<option value="{{ t }}">{{ t }}</option>{% endfor %}
  </select>
</div>

<div id="books" class="row g-3">
  {% for b in books %}
  <div class="col-md-4 book-card" data-title="{{ b.title|lower }}" data-author="{{ b.author|lower }}" data-tags="{{ b.tags|lower }}">
    <div class="card h-100">
      <div class="card-body">
        <h5 class="card-title"><a href="{{ url_for('books.book_detail', book_id=b.id) }}" class="text-decoration-none">{{ b.title }}</a></h5>
        <h6 class="card-subtitle text-muted mb-2">{{ b.author }}</h6>
        <p class="mb-1"><strong>Rating:</strong> {{ b.rating or "-" }}</p>
        <p class="mb-2">{% if b.tags %}{% for t in b.tags.split(',') %}<span class="badge text-bg-secondary me-1">{{ t.strip() }}</span>{% endfor %}{% endif %}</p>
        <div class="d-flex gap-2">
          <a class="btn btn-sm btn-outline-primary" href="{{ url_for('books.books_edit', book_id=b.id) }}">Edit</a>
          <form method="post" action="{{ url_for('books.books_delete', book_id=b.id) }}" onsubmit="return confirm('Delete this book?')">
            <button class="btn btn-sm btn-outline-danger">Delete</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  {% else %}
    <p>No books yet. Add your first one!</p>
  {% endfor %}
</div>
{% endblock %}
